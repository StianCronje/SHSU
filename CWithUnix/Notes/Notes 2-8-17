Notes 2/8/17
Special Programming
Burris

Shared library (library creation page 14)
$ gcc -fPIC -c <pgmName>.c
	"PIC" = position independent code
$ gcc -shared -o lib<pgmName>.so <pgmName>.o
$ gcc -o <libraryName> randTest.c -L -l<pgmName>

$ export LD_LIBRARY_PATH=./
$ ldd <libraryName>

Fuction Pointers - Dynamic Link Libraries (lib creation pg 18)
	#include <dlfcn.h>

	int main()
	{
		void *handle //void can point to anything

		//define func pointers
		void(*seedRandGen_d)();
		int(*getRandInt)(int);

		//RTLD_LAZY vs RTLD_NOW
		handle = dlopen("./libRandapi.so", RTLD_LAZY);
		if(handle==(void*)0){
			fputs(dlerror(), stderr);
			exit(-1);
		}

		seedRandGenerator_d = dlsym(handle, "seedRandGenerator");
		err = dlerror();
		if(err!= null)
		{
			fputs(err, stderr);
			exit(-1);
		}


		(*seedRandGenerator_d);

		dlclose(handle);
	}